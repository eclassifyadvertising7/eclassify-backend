# API Documentation Update - Profile Photo Structure

## Summary
Updated all API documentation to reflect that `profilePhoto` is now nested inside the `profile` object instead of being directly in the `user` object.

## Changes Made

### 1. API-Docs/chat-api-reference.md
**Updated:**
- Chat room list responses - buyer and seller objects
- Chat message responses - sender object

**Before:**
```json
"buyer": {
  "id": 789,
  "fullName": "John Doe",
  "profilePhoto": "http://localhost:5000/uploads/..."
}
```

**After:**
```json
"buyer": {
  "id": 789,
  "fullName": "John Doe",
  "profile": {
    "profilePhoto": "https://res.cloudinary.com/.../photo.jpg"
  }
}
```

### 2. API-Docs/profile.md
**Updated:**
- GET /api/profile response
- PATCH /api/profile response
- GET /api/profile/:userId response (admin)

**Before:**
```json
{
  "id": 123,
  "fullName": "John Doe",
  "profilePhoto": "http://localhost:5000/...",
  "profile": {
    "dob": "1990-01-01",
    ...
  }
}
```

**After:**
```json
{
  "id": 123,
  "fullName": "John Doe",
  "profile": {
    "dob": "1990-01-01",
    "profilePhoto": "https://res.cloudinary.com/.../photo.jpg",
    ...
  }
}
```

### 3. API-Docs/listings.md
**Updated:**
- GET /api/listings/:id response - user object
- Listing detail responses

**Before:**
```json
"user": {
  "id": 456,
  "fullName": "John Doe",
  "email": "john@example.com"
}
```

**After:**
```json
"user": {
  "id": 456,
  "fullName": "John Doe",
  "email": "john@example.com",
  "profile": {
    "profilePhoto": "https://res.cloudinary.com/.../photo.jpg"
  }
}
```

### 4. API-Docs/public-listings-api.md
**Updated:**
- GET /api/public/listings/:slug response - user object

**Structure:** Same as listings.md

### 5. API-Docs/authentication.md
**No changes needed** - Authentication responses don't include profile data

### 6. API-Docs/listings-feed.md
**No changes needed** - No user objects in feed responses

## Key Changes

1. **Location Change:** `profilePhoto` moved from `user` object to `user.profile` object
2. **URL Format:** Updated to show Cloudinary URLs instead of local URLs
3. **Consistency:** All user objects across all endpoints now follow the same structure

## Frontend Impact

Frontend code needs to update from:
```javascript
// ❌ Old
user.profilePhoto

// ✅ New
user.profile?.profilePhoto
```

## Notes

- Profile photo is now always returned as a full URL (Cloudinary or local)
- The URL is generated by the UserProfile model getter
- Storage type and MIME type are handled internally
- Frontend doesn't need to know about storage implementation
