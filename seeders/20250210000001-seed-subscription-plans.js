export async function up(queryInterface, Sequelize) {
  const now = new Date();

  await queryInterface.bulkInsert('subscription_plans', [
    // FREE PLAN (System Plan)
    {
      plan_code: 'free',
      version: 1,
      name: 'Free Plan',
      slug: 'free',
      description: 'Perfect for getting started. Post your first listings and explore the platform.',
      short_description: 'Basic features to get you started',
      base_price: 0.00,
      discount_amount: 0.00,
      final_price: 0.00,
      currency: 'INR',
      billing_cycle: 'monthly',
      duration_days: 30,
      tagline: 'Start selling for free',
      show_original_price: false,
      show_offer_badge: false,
      offer_badge_text: null,
      sort_order: 1,
      // Quotas
      max_total_listings: 10,
      max_active_listings: 2,
      listing_quota_limit: 3,
      listing_quota_rolling_days: 30,
      // Featured
      max_featured_listings: 0,
      max_boosted_listings: 0,
      max_spotlight_listings: 0,
      max_homepage_listings: 0,
      featured_days: 0,
      boosted_days: 0,
      spotlight_days: 0,
      // Visibility
      priority_score: 0,
      search_boost_multiplier: 1.0,
      recommendation_boost_multiplier: 1.0,
      cross_city_visibility: false,
      national_visibility: false,
      // Management
      auto_renewal: false,
      max_renewals: 3,
      listing_duration_days: 30,
      auto_refresh_enabled: false,
      refresh_frequency_days: null,
      manual_refresh_per_cycle: 0,
      support_level: 'standard',
      features: JSON.stringify({
        showPhoneNumber: true,
        showWhatsapp: false,
        allowChat: true,
        priorityChatSupport: false,
        analyticsEnabled: false,
        viewCountVisible: false,
        trackLeads: false,
        sellerVerificationIncluded: false,
        trustBadge: false,
        warrantyBadge: false,
        geoTargetingEnabled: false,
        radiusTargetingKm: null,
        socialSharingEnabled: true,
        createPromotions: false,
        autoApproval: false,
        priorityModeration: false,
        appealRejectedListings: true
      }),
      available_addons: JSON.stringify([]),
      upsell_suggestions: JSON.stringify({ recommended: 'basic' }),
      metadata: JSON.stringify({}),
      internal_notes: 'Default free plan for all new users',
      terms_and_conditions: null,
      is_active: true,
      is_public: true,
      is_default: true,
      is_featured: false,
      is_system_plan: true,
      deprecated_at: null,
      replaced_by_plan_id: null,
      created_by: null,
      updated_by: null,
      deleted_by: null,
      created_at: now,
      updated_at: now,
      deleted_at: null
    },

    // BASIC PLAN
    {
      plan_code: 'basic',
      version: 1,
      name: 'Basic Plan',
      slug: 'basic',
      description: 'Ideal for regular sellers. Get more listings and basic promotional features.',
      short_description: 'More listings with basic promotion',
      base_price: 299.00,
      discount_amount: 0.00,
      final_price: 299.00,
      currency: 'INR',
      billing_cycle: 'monthly',
      duration_days: 30,
      tagline: 'Best for regular sellers',
      show_original_price: false,
      show_offer_badge: false,
      offer_badge_text: null,
      sort_order: 2,
      // Quotas
      max_total_listings: 50,
      max_active_listings: 10,
      listing_quota_limit: 10,
      listing_quota_rolling_days: 30,
      // Featured
      max_featured_listings: 2,
      max_boosted_listings: 1,
      max_spotlight_listings: 0,
      max_homepage_listings: 0,
      featured_days: 7,
      boosted_days: 3,
      spotlight_days: 0,
      // Visibility
      priority_score: 10,
      search_boost_multiplier: 1.2,
      recommendation_boost_multiplier: 1.1,
      cross_city_visibility: true,
      national_visibility: false,
      // Management
      auto_renewal: true,
      max_renewals: 5,
      listing_duration_days: 45,
      auto_refresh_enabled: false,
      refresh_frequency_days: null,
      manual_refresh_per_cycle: 3,
      support_level: 'standard',
      features: JSON.stringify({
        showPhoneNumber: true,
        showWhatsapp: true,
        allowChat: true,
        priorityChatSupport: false,
        analyticsEnabled: true,
        viewCountVisible: true,
        trackLeads: true,
        sellerVerificationIncluded: false,
        trustBadge: false,
        warrantyBadge: false,
        geoTargetingEnabled: false,
        radiusTargetingKm: null,
        socialSharingEnabled: true,
        createPromotions: false,
        autoApproval: false,
        priorityModeration: false,
        appealRejectedListings: true
      }),
      available_addons: JSON.stringify(['extra_boost', 'featured_upgrade']),
      upsell_suggestions: JSON.stringify({ recommended: 'premium' }),
      metadata: JSON.stringify({}),
      internal_notes: 'Entry-level paid plan',
      terms_and_conditions: null,
      is_active: true,
      is_public: true,
      is_default: false,
      is_featured: false,
      is_system_plan: false,
      deprecated_at: null,
      replaced_by_plan_id: null,
      created_by: null,
      updated_by: null,
      deleted_by: null,
      created_at: now,
      updated_at: now,
      deleted_at: null
    },

    // PREMIUM PLAN
    {
      plan_code: 'premium',
      version: 1,
      name: 'Premium Plan',
      slug: 'premium',
      description: 'For serious sellers. Maximum visibility with featured listings and priority support.',
      short_description: 'Maximum visibility and priority support',
      base_price: 999.00,
      discount_amount: 200.00,
      final_price: 799.00,
      currency: 'INR',
      billing_cycle: 'monthly',
      duration_days: 30,
      tagline: 'Most popular choice',
      show_original_price: true,
      show_offer_badge: true,
      offer_badge_text: '20% OFF',
      sort_order: 3,
      // Quotas
      max_total_listings: 200,
      max_active_listings: 30,
      listing_quota_limit: 50,
      listing_quota_rolling_days: 30,
      // Featured
      max_featured_listings: 10,
      max_boosted_listings: 5,
      max_spotlight_listings: 2,
      max_homepage_listings: 1,
      featured_days: 15,
      boosted_days: 7,
      spotlight_days: 3,
      // Visibility
      priority_score: 30,
      search_boost_multiplier: 1.5,
      recommendation_boost_multiplier: 1.3,
      cross_city_visibility: true,
      national_visibility: true,
      // Management
      auto_renewal: true,
      max_renewals: 10,
      listing_duration_days: 60,
      auto_refresh_enabled: true,
      refresh_frequency_days: 7,
      manual_refresh_per_cycle: 10,
      support_level: 'priority',
      features: JSON.stringify({
        showPhoneNumber: true,
        showWhatsapp: true,
        allowChat: true,
        priorityChatSupport: true,
        analyticsEnabled: true,
        viewCountVisible: true,
        trackLeads: true,
        sellerVerificationIncluded: true,
        trustBadge: true,
        warrantyBadge: true,
        geoTargetingEnabled: true,
        radiusTargetingKm: 100,
        socialSharingEnabled: true,
        createPromotions: true,
        autoApproval: false,
        priorityModeration: true,
        appealRejectedListings: true
      }),
      available_addons: JSON.stringify(['homepage_spotlight', 'extra_boost']),
      upsell_suggestions: JSON.stringify({ recommended: 'enterprise' }),
      metadata: JSON.stringify({}),
      internal_notes: 'Most popular plan for power sellers',
      terms_and_conditions: null,
      is_active: true,
      is_public: true,
      is_default: false,
      is_featured: true,
      is_system_plan: false,
      deprecated_at: null,
      replaced_by_plan_id: null,
      created_by: null,
      updated_by: null,
      deleted_by: null,
      created_at: now,
      updated_at: now,
      deleted_at: null
    },

    // ENTERPRISE PLAN
    {
      plan_code: 'enterprise',
      version: 1,
      name: 'Enterprise Plan',
      slug: 'enterprise',
      description: 'For businesses and dealers. Unlimited listings with auto-approval and dedicated support.',
      short_description: 'Unlimited listings with dedicated support',
      base_price: 2999.00,
      discount_amount: 500.00,
      final_price: 2499.00,
      currency: 'INR',
      billing_cycle: 'monthly',
      duration_days: 30,
      tagline: 'For professional dealers',
      show_original_price: true,
      show_offer_badge: true,
      offer_badge_text: 'BEST VALUE',
      sort_order: 4,
      // Quotas
      max_total_listings: 999999,
      max_active_listings: 100,
      listing_quota_limit: null, // Unlimited
      listing_quota_rolling_days: null,
      // Featured
      max_featured_listings: 50,
      max_boosted_listings: 20,
      max_spotlight_listings: 10,
      max_homepage_listings: 5,
      featured_days: 30,
      boosted_days: 15,
      spotlight_days: 7,
      // Visibility
      priority_score: 50,
      search_boost_multiplier: 2.0,
      recommendation_boost_multiplier: 1.8,
      cross_city_visibility: true,
      national_visibility: true,
      // Management
      auto_renewal: true,
      max_renewals: 999,
      listing_duration_days: 90,
      auto_refresh_enabled: true,
      refresh_frequency_days: 3,
      manual_refresh_per_cycle: 50,
      support_level: 'dedicated',
      features: JSON.stringify({
        showPhoneNumber: true,
        showWhatsapp: true,
        allowChat: true,
        priorityChatSupport: true,
        analyticsEnabled: true,
        viewCountVisible: true,
        trackLeads: true,
        sellerVerificationIncluded: true,
        trustBadge: true,
        warrantyBadge: true,
        geoTargetingEnabled: true,
        radiusTargetingKm: 500,
        socialSharingEnabled: true,
        createPromotions: true,
        autoApproval: true,
        priorityModeration: true,
        appealRejectedListings: true
      }),
      available_addons: JSON.stringify([]),
      upsell_suggestions: JSON.stringify({}),
      metadata: JSON.stringify({ customSupport: true }),
      internal_notes: 'Top-tier plan for dealers and businesses',
      terms_and_conditions: null,
      is_active: true,
      is_public: true,
      is_default: false,
      is_featured: true,
      is_system_plan: false,
      deprecated_at: null,
      replaced_by_plan_id: null,
      created_by: null,
      updated_by: null,
      deleted_by: null,
      created_at: now,
      updated_at: now,
      deleted_at: null
    }
  ]);
}

export async function down(queryInterface, Sequelize) {
  await queryInterface.bulkDelete('subscription_plans', {
    plan_code: {
      [Sequelize.Op.in]: ['free', 'basic', 'premium', 'enterprise']
    }
  });
}
